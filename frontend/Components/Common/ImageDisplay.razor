@using ToolsSharing.Frontend.Services
@inject IUrlService UrlService

<img src="@GetImageUrl()" 
     alt="@Alt" 
     class="@Class" 
     style="@Style"
     @attributes="AdditionalAttributes" />

@code {
    /// <summary>
    /// The storage path or URL of the image
    /// </summary>
    [Parameter] public string? Src { get; set; }

    /// <summary>
    /// Alternative text for the image
    /// </summary>
    [Parameter] public string Alt { get; set; } = "";

    /// <summary>
    /// CSS classes to apply to the image
    /// </summary>
    [Parameter] public string Class { get; set; } = "";

    /// <summary>
    /// Inline styles to apply to the image
    /// </summary>
    [Parameter] public string Style { get; set; } = "";

    /// <summary>
    /// Default placeholder image when Src is empty
    /// </summary>
    [Parameter] public string PlaceholderImage { get; set; } = "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtc2l6ZT0iMTgiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIj5JbWFnZTwvdGV4dD48L3N2Zz4=";

    /// <summary>
    /// Additional HTML attributes
    /// </summary>
    [Parameter(CaptureUnmatchedValues = true)]
    public Dictionary<string, object>? AdditionalAttributes { get; set; }

    private string GetImageUrl()
    {
        return !string.IsNullOrEmpty(Src) 
            ? UrlService.GetFileUrl(Src)
            : PlaceholderImage;
    }
}